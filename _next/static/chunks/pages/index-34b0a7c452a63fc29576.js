_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[6],{"/EDR":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("23aj")}])},"23aj":function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSG",(function(){return j}));var r=n("nKUr"),i=n("nOHt"),s=n("q1tI"),c=function(){function e(){}return e.prototype.expandToken=function(e){for(var t=[],n="",r=0,i=e.length;r<i;++r)n+=e.charAt(r),t.push(n);return t},e}(),a=function(){function e(){}return e.prototype.sanitize=function(e){return e?e.toLocaleLowerCase().trim():""},e}();function o(e,t){t=t||[];for(var n=e=e||{},r=0;r<t.length;r++)if(null==(n=n[t[r]]))return null;return n}var u=function(){function e(e){this._uidFieldName=e,this._tokenToIdfCache={},this._tokenMap={}}var t=e.prototype;return t.indexDocument=function(e,t,n){this._tokenToIdfCache={};var r,i=this._tokenMap;"object"!==typeof i[e]?i[e]=r={$numDocumentOccurrences:0,$totalNumOccurrences:1,$uidMap:{}}:(r=i[e]).$totalNumOccurrences++;var s=r.$uidMap;"object"!==typeof s[t]?(r.$numDocumentOccurrences++,s[t]={$document:n,$numTokenOccurrences:1}):s[t].$numTokenOccurrences++},t.search=function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var s=e[r],c=this._tokenMap[s];if(!c)return[];if(0===r)for(var a=0,o=(u=Object.keys(c.$uidMap)).length;a<o;a++){n[d=u[a]]=c.$uidMap[d].$document}else{var u;for(a=0,o=(u=Object.keys(n)).length;a<o;a++){var d=u[a];"object"!==typeof c.$uidMap[d]&&delete n[d]}}}var l=[];for(var d in n)l.push(n[d]);var h=this._createCalculateTfIdf();return l.sort((function(n,r){return h(e,r,t)-h(e,n,t)}))},t._createCalculateIdf=function(){var e=this._tokenMap,t=this._tokenToIdfCache;return function(n,r){if(!t[n]){var i="undefined"!==typeof e[n]?e[n].$numDocumentOccurrences:0;t[n]=1+Math.log(r.length/(1+i))}return t[n]}},t._createCalculateTfIdf=function(){var e=this._tokenMap,t=this._uidFieldName,n=this._createCalculateIdf();return function(r,i,s){for(var c=0,a=0,u=r.length;a<u;++a){var d,l=r[a],h=n(l,s);h===1/0&&(h=0),d=t instanceof Array?i&&o(i,t):i&&i[t],c+=("undefined"!==typeof e[l]&&"undefined"!==typeof e[l].$uidMap[d]?e[l].$uidMap[d].$numTokenOccurrences:0)*h}return c}},e}(),d=/[^a-z\u0430-\u044f\u04510-9\-']+/i,l=function(){function e(){}return e.prototype.tokenize=function(e){return e.split(d).filter((function(e){return e}))},e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(e){if(!e)throw Error("js-search requires a uid field name constructor parameter");this._uidFieldName=e,this._indexStrategy=new c,this._searchIndex=new u(e),this._sanitizer=new a,this._tokenizer=new l,this._documents=[],this._searchableFields=[]}var t,n,r,i=e.prototype;return i.addDocument=function(e){this.addDocuments([e])},i.addDocuments=function(e){this._documents=this._documents.concat(e),this.indexDocuments_(e,this._searchableFields)},i.addIndex=function(e){this._searchableFields.push(e),this.indexDocuments_(this._documents,[e])},i.search=function(e){var t=this._tokenizer.tokenize(this._sanitizer.sanitize(e));return this._searchIndex.search(t,this._documents)},i.indexDocuments_=function(e,t){this._initialized=!0;for(var n=this._indexStrategy,r=this._sanitizer,i=this._searchIndex,s=this._tokenizer,c=this._uidFieldName,a=0,u=e.length;a<u;a++){var d,l=e[a];d=c instanceof Array?o(l,c):l[c];for(var h=0,f=t.length;h<f;h++){var _,p=t[h];if(null!=(_=p instanceof Array?o(l,p):l[p])&&"string"!==typeof _&&_.toString&&(_=_.toString()),"string"===typeof _)for(var x=s.tokenize(r.sanitize(_)),m=0,j=x.length;m<j;m++)for(var b=x[m],v=n.expandToken(b),y=0,O=v.length;y<O;y++){var g=v[y];i.indexDocument(g,d,l)}}}},t=e,(n=[{key:"indexStrategy",set:function(e){if(this._initialized)throw Error("IIndexStrategy cannot be set after initialization");this._indexStrategy=e},get:function(){return this._indexStrategy}},{key:"sanitizer",set:function(e){if(this._initialized)throw Error("ISanitizer cannot be set after initialization");this._sanitizer=e},get:function(){return this._sanitizer}},{key:"searchIndex",set:function(e){if(this._initialized)throw Error("ISearchIndex cannot be set after initialization");this._searchIndex=e},get:function(){return this._searchIndex}},{key:"tokenizer",set:function(e){if(this._initialized)throw Error("ITokenizer cannot be set after initialization");this._tokenizer=e},get:function(){return this._tokenizer}}])&&h(t.prototype,n),r&&h(t,r),e}(),_=function(e){var t=e.defaultValue,n=e.onSearch,i=Object(s.useState)(""),c=i[0],a=i[1];return Object(r.jsx)("input",{className:"w-full p-3 placeholder-black border border-gray-400 rounded-md shadow-md focus:border-blue-500",placeholder:"Search a county or school",onChange:function(e){return a(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&n(c)},defaultValue:t||""})},p=function(e){return"no cases reported"===e.toLowerCase()?-1:parseInt(e)},x=function(e){var t=e.result,n=p(t.staff_cases_cumulative),i=p(t.staff_cases_new),s=p(t.student_cases_cumulative),c=p(t.student_cases_new);return Object(r.jsxs)("div",{className:"p-5 mb-5 bg-white rounded-lg shadow-xl",children:[Object(r.jsxs)("h2",{className:"text-sm font-bold tracking-widest text-gray-500 uppercase",children:[t.county," County"]}),Object(r.jsx)("h1",{className:"mb-2 text-2xl text-gray-900",children:t.school_or_school_district}),Object(r.jsxs)("div",{className:"flex",children:[Object(r.jsxs)("p",{className:"mr-4",children:[Object(r.jsx)("span",{className:"text-gray-700",children:"Staff Cases:"})," ",Object(r.jsxs)("span",{className:"font-bold",children:[n>=0?n:"None Reported"," ",i>0?Object(r.jsx)("span",{className:"text-red-600",children:"(+".concat(i,")")}):""]})]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{className:"text-gray-700",children:"Student Cases:"})," ",Object(r.jsxs)("span",{className:"font-bold",children:[s>=0?s:"None Reported"," ",c>0?Object(r.jsx)("span",{className:"text-red-600",children:"(+".concat(c,")")}):""]})]})]})]})},m=function(e){var t=e.results.map((function(e){return Object(r.jsx)(x,{result:e},e.school_or_school_district)}));return Object(r.jsx)("div",{children:t})},j=!0;t.default=function(e){var t=e.records,n=Object(s.useState)(null),c=n[0],a=n[1];Object(s.useEffect)((function(){a(function(e){var t=new f("school_or_school_district");return t.addIndex("county"),t.addIndex("school_or_school_district"),t.addDocuments(e),t}(t))}),[]);var o=Object(i.useRouter)(),u=Object(s.useState)([]),d=u[0],l=u[1];return Object(s.useEffect)((function(){c&&l(c.search(decodeURIComponent(o.query.q)))}),[o.query.q,c]),Object(r.jsxs)("div",{className:"flex flex-col items-stretch h-screen",children:[Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:"max-w-2xl px-5 py-8 mx-auto",children:[Object(r.jsx)("h1",{className:"mb-4 font-sans text-4xl font-bold text-center text-gray-900",children:"Ohio School COVID-19 Case Tracker"}),Object(r.jsx)("div",{children:Object(r.jsx)(_,{onSearch:function(e){o.push({pathname:"/",query:{q:encodeURIComponent(e)}},void 0,{shallow:!0})},defaultValue:o.query.q?decodeURIComponent(o.query.q):void 0})})]})}),Object(r.jsx)("div",{className:"flex-grow bg-gray-200",children:Object(r.jsx)("div",{className:"max-w-2xl px-5 pt-8 mx-auto",children:Object(r.jsx)("div",{children:d.length>0?Object(r.jsx)(m,{results:d}):Object(r.jsx)("div",{className:"p-4 bg-white rounded-lg shadow-xl",children:Object(r.jsx)("p",{children:o.query.q?"No results found.":"Please enter a search term."})})})})})]})}}},[["/EDR",0,2,1]]]);